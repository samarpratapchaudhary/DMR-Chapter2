/* Write a function setbits(x, p, n, y) that returns x with the n bits that begin at position p set to the rightmost n bits of y, leaving the other bits unchanged */
#include <stdio.h>

/* setbits: return x with the n bits that begin at position p 
   set to the rightmost n bits of y */
unsigned setbits(unsigned x, int p, int n, unsigned y) {
    return (x & ~(~(~0 << n) << (p+1-n)))   // clear n bits at pos p
           | ((y & ~(~0 << n)) << (p+1-n)); // set them from y
}

int main() {
    unsigned x, y;
    int p, n;

    printf("Enter x (in decimal): ");
    scanf("%u", &x);

    printf("Enter y (in decimal): ");
    scanf("%u", &y);

    printf("Enter position p: ");
    scanf("%d", &p);

    printf("Enter number of bits n: ");
    scanf("%d", &n);

    unsigned result = setbits(x, p, n, y);

    printf("Result: %u\n", result);

    return 0;
}
